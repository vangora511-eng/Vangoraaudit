<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Thanks — Complete Your Intake</title>
  <meta name="robots" content="noindex, follow" />
  <link rel="icon" href="/assets/favicon.ico" />
  <style>
    :root{ --bg:#ffffff; --text:#1f2937; --muted:#6b7280; --line:#e5e7eb; --accent:#E11D48 }
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif}
    .container{max-width:820px;margin-inline:auto;padding:24px}
    .card{border:1px solid var(--line);border-radius:16px;padding:20px;background:var(--bg)}
    h1{font-size:28px;margin:0 0 10px}
    .muted{color:var(--muted)}
    form{display:grid;gap:14px}
    input,textarea{width:100%;padding:12px 14px;border:1px solid var(--line);border-radius:12px}
    .btn{padding:12px 18px;border-radius:999px;background:var(--accent);color:#fff;border:0;cursor:pointer}
    a{color:inherit}
  </style>
</head>
<body>
  <div class="container">
    <img src="/assets/logo.svg" alt="VANGORA" style="height:42px" onerror="this.style.display='none'"/>
    <h1>Payment received — just one last step</h1>
    <p class="muted">Fill the short form below so we can complete your audit. You’ll receive your report in 1–5 business days.</p>

    <div id="intake" class="card">
      <!-- Forms injected by JS -->
    </div>

    <p style="margin-top:16px"><a href="/">← Back to home</a></p>
  </div>

  <script>
    const accessKey = 'YOUR_WEB3FORMS_ACCESS_KEY'; // REQUIRED
    const service = localStorage.getItem('paidService');     // 'tiktok' | 'instagram'
    const tier = localStorage.getItem('paidTier');           // 'starter'|'professional'|'premium'

    const intake = document.getElementById('intake');

    function formOpen(action, hiddenSubject, fieldsHtml){
      return `
        <form action="https://api.web3forms.com/submit" method="POST">
          <input type="hidden" name="access_key" value="${accessKey}" />
          <input type="hidden" name="subject" value="${hiddenSubject}" />
          <input type="text" name="honeypot" style="display:none">
          ${fieldsHtml}
          <button class="btn" type="submit">Submit Info</button>
          <p class="muted">We’ll confirm via email. Delivery in 1–5 business days.</p>
        </form>
      `;
    }

    function renderAuditForm(platform){
      if(!tier){ intake.innerHTML = '<p>Please <a href="/">choose a package</a> first.</p>'; return; }
      const title = `${platform} Audit — ${tier[0].toUpperCase() + tier.slice(1)}`;
      let fields = '';
      if(platform==='TikTok'){
        if(tier==='starter'){
          fields = `
            <input type="text" name="handle" placeholder="TikTok Handle @*" required />
            <input type="text" name="type" placeholder="Account Type (Creator / Business / Personal)*" required />
            <input type="text" name="goal" placeholder="Main Goal (Growth / Sales / Awareness / Community)*" required />
            <input type="text" name="competitors" placeholder="Competitor pages (optional)" />
            <textarea name="notes" placeholder="Notes or requests (optional)"></textarea>
            <input type="email" name="email" placeholder="Email for delivery (required)" required />
          `;
        } else if(tier==='professional'){
          fields = `
            <input type="text" name="handle" placeholder="TikTok Handle @*" required />
            <input type="text" name="type" placeholder="Account Type (Creator / Business / Brand)*" required />
            <input type="text" name="goal" placeholder="Main Goal*" required />
            <input type="url" name="website" placeholder="Website / Landing Page (optional)" />
            <input type="text" name="competitors" placeholder="Competitors (up to 3)" />
            <input type="text" name="style" placeholder="Preferred style or color scheme" />
            <input type="email" name="email" placeholder="Email for delivery (required)" required />
          `;
        } else {
          fields = `
            <input type="text" name="handle" placeholder="TikTok Handle @*" required />
            <input type="text" name="type" placeholder="Account Type*" required />
            <input type="text" name="objective" placeholder="Main Objective (Conversions / Leads / Branding)*" required />
            <input type="text" name="audience" placeholder="Audience (Age, Region, Niche) (optional)" />
            <textarea name="notes" placeholder="Notes or analytics links"></textarea>
            <input type="email" name="email" placeholder="Email for delivery (required)" required />
          `;
        }
      } else { // Instagram
        if(tier==='starter'){
          fields = `
            <input type="text" name="handle" placeholder="Instagram Handle @*" required />
            <input type="text" name="type" placeholder="Account Type (Creator / Business / Personal)*" required />
            <input type="text" name="goal" placeholder="Main Goal (Growth / Sales / Awareness / Community)*" required />
            <input type="text" name="competitors" placeholder="Competitor pages (optional)" />
            <textarea name="notes" placeholder="Notes or requests (optional)"></textarea>
            <input type="email" name="email" placeholder="Email for delivery (required)" required />
          `;
        } else if(tier==='professional'){
          fields = `
            <input type="text" name="handle" placeholder="Instagram Handle @*" required />
            <input type="text" name="type" placeholder="Account Type (Creator / Business / Brand)*" required />
            <input type="text" name="goal" placeholder="Main Goal*" required />
            <input type="url" name="website" placeholder="Website / Landing Page (optional)" />
            <input type="text" name="competitors" placeholder="Competitors (up to 3)" />
            <input type="text" name="style" placeholder="Preferred content style or color scheme" />
            <input type="email" name="email" placeholder="Email for delivery (required)" required />
          `;
        } else {
          fields = `
            <input type="text" name="handle" placeholder="Instagram Handle @*" required />
            <input type="text" name="type" placeholder="Account Type*" required />
            <input type="text" name="objective" placeholder="Main Objective (Conversions / Leads / Branding)*" required />
            <input type="text" name="audience" placeholder="Audience (Age, Region, Niche) (optional)" />
            <textarea name="notes" placeholder="Notes or analytics links"></textarea>
            <input type="email" name="email" placeholder="Email for delivery (required)" required />
          `;
        }
      }
      intake.innerHTML = `<h3>${title}</h3>` + formOpen('https://api.web3forms.com/submit', title, fields);
    }

    if(service === 'tiktok'){ renderAuditForm('TikTok'); }
    else if(service === 'instagram'){ renderAuditForm('Instagram'); }
    else {
      intake.innerHTML = '<p>We couldn’t detect your purchase. Please <a href="/">choose a package</a> first.</p>';
    }

    // Optional: clear keys after render so a refresh doesn’t duplicate
    localStorage.removeItem('paidService');
    localStorage.removeItem('paidTier');
  </script>
</body>
</html>
